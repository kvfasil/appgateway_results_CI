
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Firebolt Schema Validation Result</title>
      <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif; margin: 0; padding: 0; background: #f4f7f9; color:#1a2c42; }
        .container { max-width: 1200px; margin: 32px auto; background: #fff; border-radius: 10px; box-shadow: 0 6px 16px rgba(0,0,0,0.08); padding: 28px; }
        h1 { text-align: center; margin: 0 0 6px 0; }
        .meta { text-align:center; color:#6b7b8c; font-size: 13px; margin-bottom: 16px; }
        .summary { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px,1fr)); gap: 14px; margin-bottom: 16px; }
        .card { background:#f9fafb; border:1px solid #eef2f5; border-radius:10px; padding:14px; text-align:center; }
        .card h3 { margin:0 0 6px 0; font-size:13px; color:#44566c; font-weight:600; }
        .card .count { font-size:24px; font-weight:700; }
        .card.passed .count{ color:#28a745; }
        .card.failed .count{ color:#dc3545; }
        .card.skipped .count{ color:#6c757d; }
        .progress { position:relative; height:6px; background:#eef2f5; border-radius:999px; overflow:hidden; margin-top:8px; }
        .progress > span { position:absolute; left:0; top:0; bottom:0; background:linear-gradient(90deg,#28a745,#20c997); border-radius:999px; }
        .controls { display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between; background:#f9fafb; border:1px solid #eef2f5; border-radius:10px; padding:10px 12px; margin: 10px 0 18px 0; }
        .left-controls, .right-controls{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
        .search { display:flex; align-items:center; gap:8px; background:#fff; border:1px solid #e3e8ee; border-radius:8px; padding:6px 10px; }
        .search input{ border:none; outline:none; font-size:14px; min-width:220px; }
        .select { border:1px solid #e3e8ee; background:#fff; border-radius:8px; padding:6px 10px; font-size:14px; }
        .btn { border:1px solid #e3e8ee; background:#fff; border-radius:8px; padding:6px 10px; font-size:13px; cursor:pointer; }
        .btn:hover{ background:#f3f6f9; }
        .tabs { display:flex; justify-content:center; flex-wrap:wrap; margin: 10px 0 12px 0; gap:6px; }
        .tab { padding:10px 18px; cursor:pointer; border-radius:999px; background:#e9eef3; font-weight:600; color:#44566c; }
        .tab.active { background:#1976d2; color:#fff; }
        .test-list { background:#fff; border:1px solid #eef2f5; border-radius:10px; padding: 0 0 6px 0; overflow:hidden; }
        .test-item { border-top: 1px solid #eef2f5; padding: 12px 16px; }
        .test-item:first-child{ border-top:none; }
        .test-header { display:flex; justify-content:space-between; align-items:center; gap:12px; cursor:pointer; }
        .test-name { font-weight:600; }
        .idtag { font-size:11px; padding:2px 6px; border-radius:6px; background:#eef1f4; color:#6b7b8c; margin-right:8px; border:1px solid #e3e8ee; }
        .badge { font-size:12px; padding:3px 8px; border-radius:999px; border:1px solid currentColor; }
        .badge.passed{ color:#28a745; background:#eaf7ef; }
        .badge.failed{ color:#dc3545; background:#fdecef; }
        .badge.skipped{ color:#6c757d; background:#eef1f4; }
        .duration { color:#6b7b8c; font-size:12px; }
        .details { display:none; background:#f9fbfd; border:1px solid #eef2f5; border-radius:8px; margin-top:10px; padding:12px; }
        .detail-grid{ display:flex; gap:12px; flex-wrap:wrap; }
        .col{ flex:1 1 380px; }
        h4{ margin:8px 0 6px 0; font-size:13px; color:#44566c; }
        pre{ background:#eef2f5; padding:10px; border-radius:6px; overflow:auto; font-size:12px; }
        table { width:100%;border-collapse:collapse;background:#fff;border-radius:10px;overflow:hidden;box-shadow:0 1px 4px #0001; margin-bottom: 16px; }
        th, td { padding:10px; text-align:center; }
        thead { background:#1976d2;color:#fff; }
        .link{ color:#1976d2; cursor:pointer; text-decoration:underline; }
      </style>
    </head>
    <body>
      <div class="container">
        <h1 id="suiteName">Complete Firebolt Schema Validation Test Suite</h1>
        <div class="meta"><span id="timestamp">Generated On: 20260106_214033</span></div>
        <div class="summary">
          <div class="card">
            <h3>Total</h3>
            <div class="count" id="totalTests">52</div>
          </div>
          <div class="card passed">
            <h3>Passed</h3>
            <div class="count" id="passedTests">5</div>
            <div class="progress"><span id="passBar" style="width:0%"></span></div>
          </div>
          <div class="card failed">
            <h3>Failed</h3>
            <div class="count" id="failedTests">47</div>
          </div>
          <div class="card">
            <h3>Skipped</h3>
            <div class="count" id="skippedTests">0</div>
          </div>
          <div class="card">
            <h3>Duration</h3>
            <div class="count" id="duration">6517 ms</div>
          </div>
        </div>
        <div style="margin-bottom: 16px;">
          <table id="categorySummaryTable">
            <thead><tr><th>Category</th><th>Total</th><th>Passed</th><th>Failed</th><th>Skipped</th></tr></thead>
            <tbody id="categorySummaryBody"></tbody>
            <tfoot id="categorySummaryFoot"></tfoot>
          </table>
        </div>
        <div class="tabs" id="categoryTabs" style="margin-bottom: 12px;"></div>
        <div class="controls">
          <div class="left-controls">
            <div class="search">
              <span>ðŸ”Ž</span>
              <input id="searchBox" type="text" placeholder="Search tests by name or ID..." />
            </div>
            <select id="sortSelect" class="select">
              <option value="status">Sort: Status</option>
              <option value="name">Sort: Name</option>
              <option value="duration">Sort: Duration</option>
            </select>
          </div>
          <div class="right-controls">
            <button class="btn" onclick="expandAll()">Expand All</button>
            <button class="btn" onclick="collapseAll()">Collapse All</button>
          </div>
        </div>
        <div class="tabs" style="margin-bottom: 12px;">
          <div class="tab active" id="tab-all" onclick="showTab('All')">All</div>
          <div class="tab" id="tab-pass" onclick="showTab('Passed')">Pass</div>
          <div class="tab" id="tab-fail" onclick="showTab('Failed')">Fail</div>
        </div>
        <div class="test-list" id="testList"></div>
      </div>
      <script>
        const data = {"suite_name": "Complete Firebolt Schema Validation Test Suite", "total_tests": 52, "passed": 5, "failed": 47, "skipped": 0, "duration_ms": 6517, "test_results": [{"test_id": "ACCESSIBILITY001", "test_name": "Accessibility.closedCaptions Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Accessibility.closedCaptions", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Accessibility.closedCaptions", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:accessibility:closedcaptions is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 130}], "duration_ms": 130}, {"test_id": "ACCESSIBILITY002", "test_name": "Accessibility.closedCaptionsSettings Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Accessibility.closedCaptionsSettings", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Accessibility.closedCaptionsSettings", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:accessibility:closedcaptions is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 115}], "duration_ms": 115}, {"test_id": "ACCESSIBILITY003", "test_name": "Accessibility.highContrastUI Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Accessibility.highContrastUI", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Accessibility.highContrastUI", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:accessibility:highcontrastui is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 118}], "duration_ms": 118}, {"test_id": "ACCESSIBILITY004", "test_name": "Accessibility.voiceGuidance Schema Validation", "status": "Passed", "steps": [{"step_id": "TASK001", "description": "Call Accessibility.voiceGuidance", "status": "Success", "request": {"id": 1, "jsonrpc": "2.0", "method": "Accessibility.voiceGuidance", "params": {}}, "response": {"id": 1, "jsonrpc": "2.0", "result": {"enabled": false, "navigationHints": false, "rate": 0.5, "speed": 0.5}}, "duration_ms": 156}], "duration_ms": 156}, {"test_id": "ACCESSIBILITY005", "test_name": "Accessibility.voiceGuidanceSettings Schema Validation", "status": "Passed", "steps": [{"step_id": "TASK001", "description": "Call Accessibility.voiceGuidanceSettings", "status": "Success", "request": {"id": 1, "jsonrpc": "2.0", "method": "Accessibility.voiceGuidanceSettings", "params": {}}, "response": {"id": 1, "jsonrpc": "2.0", "result": {"enabled": false, "navigationHints": false, "rate": 0.5, "speed": 0.5}}, "duration_ms": 175}], "duration_ms": 175}, {"test_id": "ACCESSIBILITY006", "test_name": "Accessibility.audioDescriptionSettings Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Accessibility.audioDescriptionSettings", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Accessibility.audioDescriptionSettings", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:accessibility:audiodescriptions is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 116}], "duration_ms": 116}, {"test_id": "ACCESSIBILITY007", "test_name": "Accessibility.onClosedCaptionsSettingsChanged Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Subscribe to Accessibility event: onClosedCaptionsSettingsChanged", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Accessibility.onClosedCaptionsSettingsChanged", "params": {"listen": true}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:accessibility:closedcaptions is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 117}], "duration_ms": 117}, {"test_id": "ACCESSIBILITY008", "test_name": "Accessibility.onHighContrastUIChanged Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Subscribe to Accessibility event: onHighContrastUIChanged", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Accessibility.onHighContrastUIChanged", "params": {"listen": true}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:accessibility:highcontrastui is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 116}], "duration_ms": 116}, {"test_id": "ACCESSIBILITY009", "test_name": "Accessibility.onVoiceGuidanceSettingsChanged Schema Validation", "status": "Passed", "steps": [{"step_id": "TASK001", "description": "Subscribe to Accessibility event: onVoiceGuidanceSettingsChanged", "status": "Success", "request": {"id": 1, "jsonrpc": "2.0", "method": "Accessibility.onVoiceGuidanceSettingsChanged", "params": {"listen": true}}, "response": {"id": 1, "jsonrpc": "2.0", "result": {"event": "accessibility.onVoiceGuidanceSettingsChanged", "listening": true}}, "duration_ms": 119}], "duration_ms": 119}, {"test_id": "ACCESSIBILITY010", "test_name": "Accessibility.onAudioDescriptionSettingsChanged Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Subscribe to Accessibility event: onAudioDescriptionSettingsChanged", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Accessibility.onAudioDescriptionSettingsChanged", "params": {"listen": true}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:accessibility:audiodescriptions is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 120}], "duration_ms": 120}, {"test_id": "ACCOUNT001", "test_name": "Account.id Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Account.id", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Account.id", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:account:id is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 119}], "duration_ms": 119}, {"test_id": "ACCOUNT002", "test_name": "Account.uid Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Account.uid", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Account.uid", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:account:uid is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 121}], "duration_ms": 121}, {"test_id": "ACCOUNT003", "test_name": "Account.session Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Account.session", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Account.session", "params": {"expiresIn": 84000, "token": "RmlyZWJvbHQgTWFuYWdlIFNESyBSb2NrcyEhIQ=="}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:token:account is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 114}], "duration_ms": 114}, {"test_id": "ADVERTISING001", "test_name": "Advertising.config Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Advertising.config", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Advertising.config", "params": {"options": {"authenticationEntity": "MVPD", "environment": "prod"}}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:advertising:configuration is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 117}], "duration_ms": 117}, {"test_id": "ADVERTISING002", "test_name": "Advertising.policy Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Advertising.policy", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Advertising.policy", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:advertising:policy is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 115}], "duration_ms": 115}, {"test_id": "ADVERTISING003", "test_name": "Advertising.skipRestriction Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Advertising.skipRestriction", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Advertising.skipRestriction", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:advertising:configuration is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 115}], "duration_ms": 115}, {"test_id": "ADVERTISING004", "test_name": "Advertising.advertisingId Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Advertising.advertisingId", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Advertising.advertisingId", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:advertising:identifier is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 119}], "duration_ms": 119}, {"test_id": "ADVERTISING005", "test_name": "Advertising.deviceAttributes Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Advertising.deviceAttributes", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Advertising.deviceAttributes", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:advertising:configuration is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 116}], "duration_ms": 116}, {"test_id": "ADVERTISING006", "test_name": "Advertising.appBundleId Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Advertising.appBundleId", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Advertising.appBundleId", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:advertising:configuration is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 115}], "duration_ms": 115}, {"test_id": "ADVERTISING007", "test_name": "Advertising.resetIdentifier Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Advertising.resetIdentifier", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Advertising.resetIdentifier", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:advertising:identifier is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 124}], "duration_ms": 124}, {"test_id": "ADVERTISING008", "test_name": "Advertising.onSkipRestrictionChanged Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Subscribe to Advertising event: onSkipRestrictionChanged", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Advertising.onSkipRestrictionChanged", "params": {"listen": true}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:advertising:configuration is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 128}], "duration_ms": 128}, {"test_id": "ADVERTISING009", "test_name": "Advertising.onPolicyChanged Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Subscribe to Advertising event: onPolicyChanged", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Advertising.onPolicyChanged", "params": {"listen": true}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:advertising:policy is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 127}], "duration_ms": 127}, {"test_id": "ADVERTISING010", "test_name": "Advertising.setSkipRestriction Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Set skiprestriction in Advertising", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Advertising.setSkipRestriction", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:advertising:configuration is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 121}], "duration_ms": 121}, {"test_id": "AUDIODESCRIPTIONS001", "test_name": "AudioDescriptions.enabled Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call AudioDescriptions.enabled", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "AudioDescriptions.enabled", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:accessibility:audiodescriptions is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 113}], "duration_ms": 113}, {"test_id": "AUDIODESCRIPTIONS002", "test_name": "AudioDescriptions.onEnabledChanged Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Subscribe to AudioDescriptions event: onEnabledChanged", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "AudioDescriptions.onEnabledChanged", "params": {"listen": true}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:accessibility:audiodescriptions is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 115}], "duration_ms": 115}, {"test_id": "AUDIODESCRIPTIONS003", "test_name": "AudioDescriptions.setEnabled Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Set enabled in AudioDescriptions", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "AudioDescriptions.setEnabled", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:accessibility:audiodescriptions is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 115}], "duration_ms": 115}, {"test_id": "DEVICE001", "test_name": "Device.id Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Device.id", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.id", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:device:id is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 117}], "duration_ms": 117}, {"test_id": "DEVICE002", "test_name": "Device.distributor Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Device.distributor", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.distributor", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:device:distributor is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 118}], "duration_ms": 118}, {"test_id": "DEVICE003", "test_name": "Device.platform Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Device.platform", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.platform", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:device:info is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 115}], "duration_ms": 115}, {"test_id": "DEVICE004", "test_name": "Device.uid Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Device.uid", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.uid", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:device:uid is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 115}], "duration_ms": 115}, {"test_id": "DEVICE005", "test_name": "Device.type Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Device.type", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.type", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:device:info is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 118}], "duration_ms": 118}, {"test_id": "DEVICE006", "test_name": "Device.model Schema Validation", "status": "Passed", "steps": [{"step_id": "TASK001", "description": "Call Device.model", "status": "Success", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.model", "params": {}}, "response": {"id": 1, "jsonrpc": "2.0", "result": "XiOne-SCB"}, "duration_ms": 117}], "duration_ms": 117}, {"test_id": "DEVICE007", "test_name": "Device.sku Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Device.sku", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.sku", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:device:sku is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 114}], "duration_ms": 114}, {"test_id": "DEVICE008", "test_name": "Device.make Schema Validation", "status": "Passed", "steps": [{"step_id": "TASK001", "description": "Call Device.make", "status": "Success", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.make", "params": {}}, "response": {"id": 1, "jsonrpc": "2.0", "result": "SerComm"}, "duration_ms": 188}], "duration_ms": 188}, {"test_id": "DEVICE009", "test_name": "Device.version Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Device.version", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.version", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:device:info is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 112}], "duration_ms": 112}, {"test_id": "DEVICE010", "test_name": "Device.hdcp Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Device.hdcp", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.hdcp", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:device:info is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 115}], "duration_ms": 116}, {"test_id": "DEVICE011", "test_name": "Device.hdr Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Device.hdr", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.hdr", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:device:info is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 113}], "duration_ms": 113}, {"test_id": "DEVICE012", "test_name": "Device.audio Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Device.audio", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.audio", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:device:info is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 113}], "duration_ms": 113}, {"test_id": "DEVICE013", "test_name": "Device.screenResolution Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Device.screenResolution", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.screenResolution", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:device:info is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 122}], "duration_ms": 122}, {"test_id": "DEVICE014", "test_name": "Device.videoResolution Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Device.videoResolution", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.videoResolution", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:device:info is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 117}], "duration_ms": 117}, {"test_id": "DEVICE015", "test_name": "Device.name Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Device.name", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.name", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:device:name is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 119}], "duration_ms": 119}, {"test_id": "DEVICE016", "test_name": "Device.onDeviceNameChanged Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Subscribe to Device event: onDeviceNameChanged", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.onDeviceNameChanged", "params": {"listen": true}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:device:name is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 114}], "duration_ms": 114}, {"test_id": "DEVICE017", "test_name": "Device.network Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Device.network", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.network", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:network:status is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 114}], "duration_ms": 114}, {"test_id": "DEVICE018", "test_name": "Device.provision Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Call Device.provision", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.provision", "params": {"accountId": "12345678910", "deviceId": "987654321111", "distributorId": "global_partner"}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:account:id is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 121}], "duration_ms": 121}, {"test_id": "DEVICE019", "test_name": "Device.onNameChanged Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Subscribe to Device event: onNameChanged", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.onNameChanged", "params": {"listen": true}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:device:name is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 119}], "duration_ms": 119}, {"test_id": "DEVICE020", "test_name": "Device.onHdcpChanged Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Subscribe to Device event: onHdcpChanged", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.onHdcpChanged", "params": {"listen": true}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:device:info is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 120}], "duration_ms": 120}, {"test_id": "DEVICE021", "test_name": "Device.onHdrChanged Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Subscribe to Device event: onHdrChanged", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.onHdrChanged", "params": {"listen": true}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:device:info is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 114}], "duration_ms": 114}, {"test_id": "DEVICE022", "test_name": "Device.onAudioChanged Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Subscribe to Device event: onAudioChanged", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.onAudioChanged", "params": {"listen": true}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:device:info is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 113}], "duration_ms": 113}, {"test_id": "DEVICE023", "test_name": "Device.onScreenResolutionChanged Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Subscribe to Device event: onScreenResolutionChanged", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.onScreenResolutionChanged", "params": {"listen": true}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:device:info is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 115}], "duration_ms": 115}, {"test_id": "DEVICE024", "test_name": "Device.onVideoResolutionChanged Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Subscribe to Device event: onVideoResolutionChanged", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.onVideoResolutionChanged", "params": {"listen": true}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:device:info is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 115}], "duration_ms": 115}, {"test_id": "DEVICE025", "test_name": "Device.onNetworkChanged Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Subscribe to Device event: onNetworkChanged", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.onNetworkChanged", "params": {"listen": true}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:network:status is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 114}], "duration_ms": 114}, {"test_id": "DEVICE026", "test_name": "Device.setName Schema Validation", "status": "Failed", "steps": [{"step_id": "TASK001", "description": "Set name in Device", "status": "Failed", "request": {"id": 1, "jsonrpc": "2.0", "method": "Device.setName", "params": {}}, "response": {"error": {"code": -40300, "message": "xrn:firebolt:capability:device:name is not permitted"}, "id": 1, "jsonrpc": "2.0"}, "error": "Schema validation failed: Validation Error: Schema validation error: Missing required field: result", "duration_ms": 125}], "duration_ms": 125}]};
        // Category extraction
        const categories = Array.from(new Set(data.test_results.map(t => (t.test_id||'').split(/\d/)[0])));
        let selectedCategory = 'All';
        let currentSearch = '';
        let currentSort = 'status';

        function renderCategoryTabs() {
          const catTabs = document.getElementById('categoryTabs');
          catTabs.innerHTML = '';
          const allTab = document.createElement('div');
          allTab.className = 'tab' + (selectedCategory === 'All' ? ' active' : '');
          allTab.textContent = 'All';
          allTab.onclick = () => { selectedCategory = 'All'; renderCategoryTabs(); showTab(currentStatusTab); };
          catTabs.appendChild(allTab);
          categories.forEach(cat => {
            const tab = document.createElement('div');
            tab.className = 'tab' + (cat === selectedCategory ? ' active' : '');
            tab.textContent = cat;
            tab.onclick = () => { selectedCategory = cat; renderCategoryTabs(); showTab(currentStatusTab); };
            catTabs.appendChild(tab);
          });
        }

        // Category summary table
        function renderCategorySummaryTable() {
          const tbody = document.getElementById('categorySummaryBody');
          tbody.innerHTML = '';
          const allCats = categories;
          allCats.forEach(cat => {
            const catTests = data.test_results.filter(t => (t.test_id||'').split(/\d/)[0] === cat);
            const total = catTests.length;
            const passed = catTests.filter(t => t.status === 'Passed' || t.status === 'Success').length;
            const failed = catTests.filter(t => t.status === 'Failed').length;
            const skipped = catTests.filter(t => t.status === 'Skipped').length;
            const tr = document.createElement('tr');
            tr.innerHTML = `<td class='link' onclick="filterCategory('${cat}')">${cat}</td>
                            <td>${total}</td>
                            <td style='color:#28a745;'>${passed}</td>
                            <td style='color:#dc3545;'>${failed}</td>
                            <td style='color:#6c757d;'>${skipped}</td>`;
            tbody.appendChild(tr);
          });
        }

        window.filterCategory = function(cat) {
          selectedCategory = cat;
          renderCategoryTabs();
          showTab(currentStatusTab);
        }

        // Tab logic
        let currentStatusTab = 'All';
        window.showTab = function(status) {
          currentStatusTab = status;
          document.getElementById('tab-all').classList.remove('active');
          document.getElementById('tab-pass').classList.remove('active');
          document.getElementById('tab-fail').classList.remove('active');
          if (status === 'All') {
            document.getElementById('tab-all').classList.add('active');
          } else if (status === 'Passed') {
            document.getElementById('tab-pass').classList.add('active');
          } else {
            document.getElementById('tab-fail').classList.add('active');
          }
          renderTestList(status);
        }

        function renderTestList(status) {
          const testList = document.getElementById('testList');
          testList.innerHTML = '';
          let filtered = data.test_results;
          if (selectedCategory !== 'All') {
            filtered = filtered.filter(t => (t.test_id||'').split(/\d/)[0] === selectedCategory);
          }
          if (status === 'Passed') {
            filtered = filtered.filter(t => t.status === 'Passed' || t.status === 'Success');
          } else if (status === 'Failed') {
            filtered = filtered.filter(t => t.status === 'Failed');
          }
          if (currentSearch.trim() !== ''){
            const q = currentSearch.toLowerCase();
            filtered = filtered.filter(t => (t.test_name||'').toLowerCase().includes(q) || (t.test_id||'').toLowerCase().includes(q));
          }
          if (currentSort === 'status'){
            filtered.sort((a, b) => { const order = { 'Passed': 0, 'Success': 0, 'Failed': 1, 'Skipped': 2 }; return (order[a.status]||9) - (order[b.status]||9); });
          } else if (currentSort === 'name'){
            filtered.sort((a,b)=> (a.test_name||'').localeCompare(b.test_name||''));
          } else if (currentSort === 'duration'){
            filtered.sort((a,b)=> (a.duration_ms||0) - (b.duration_ms||0));
          }
          if (filtered.length === 0) {
            testList.innerHTML = `<div style='padding:12px;'>No ${status === 'All' ? '' : status.toLowerCase()} test cases${selectedCategory !== 'All' ? ' in ' + selectedCategory : ''}.</div>`;
            return;
          }
          filtered.forEach((test) => {
            const testDiv = document.createElement('div');
            testDiv.className = 'test-item';

            const header = document.createElement('div');
            header.className = 'test-header';
            header.innerHTML = `<div>
                <span class="idtag">${test.test_id || ''}</span>
                <span class="test-name">${test.test_name}</span>
                <span class="badge ${(test.status||'').toLowerCase()}">${test.status}</span>
              </div>
              <div class="duration">${(test.duration_ms||0)} ms</div>`;

            const detailsDiv = document.createElement('div');
            detailsDiv.className = 'details';
            detailsDiv.innerHTML = `<div style='margin-bottom:8px;color:#6b7b8c;font-size:12px;'><b>Test ID:</b> ${test.test_id || ''}</div>`;
            if (test.steps && test.steps.length > 0) {
              test.steps.forEach((step) => {
                const req = step.request ? JSON.stringify(step.request, null, 2) : '';
                const res = step.response ? JSON.stringify(step.response, null, 2) : '';
                const err = step.error ? `${step.error}` : '';
                detailsDiv.innerHTML += `<div style='margin-bottom:12px;'>
                  <div><b>Step:</b> ${step.description || step.step_id || ''}</div>
                  <div class='detail-grid'>
                    <div class='col'>
                      <h4>Request <span class='link' onclick="copyText(this)">Copy</span></h4>
                      <pre>${req}</pre>
                    </div>
                    <div class='col'>
                      <h4>Response <span class='link' onclick="copyText(this)">Copy</span></h4>
                      <pre>${res}</pre>
                      ${err ? `<h4 style='color:#dc3545;'>Error</h4><pre style='background:#fdecef;color:#842029;'>${err}</pre>` : ''}
                    </div>
                  </div>
                </div>`;
              });
            }
            testDiv.appendChild(header);
            testDiv.appendChild(detailsDiv);

            header.addEventListener('click', function(e) {
              if (e.target.tagName === 'A' || e.target.tagName === 'INPUT' || e.target.tagName === 'BUTTON') return;
              detailsDiv.style.display = detailsDiv.style.display === 'none' ? 'block' : 'none';
            });

            testList.appendChild(testDiv);
          });
        }

        // Initial render
        renderCategoryTabs();
        renderCategorySummaryTable();
        window.showTab('All');

        // Enhance counters and bars
        const passPct = data.total_tests ? Math.round(((data.passed||0)/data.total_tests)*100) : 0;
        const passBar = document.getElementById('passBar');
        if (passBar) passBar.style.width = passPct + '%';

        // Controls listeners
        document.getElementById('searchBox').addEventListener('input', (e)=>{ currentSearch = e.target.value || ''; showTab(currentStatusTab); });
        document.getElementById('sortSelect').addEventListener('change', (e)=>{ currentSort = e.target.value; showTab(currentStatusTab); });

        // Expand/Collapse helpers
        window.expandAll = function(){
          document.querySelectorAll('.details').forEach(d => d.style.display = 'block');
        }
        window.collapseAll = function(){
          document.querySelectorAll('.details').forEach(d => d.style.display = 'none');
        }

        // Copy helper
        window.copyText = function(el){
          const pre = el.closest('h4')?.nextElementSibling;
          if (!pre) return;
          const txt = pre.innerText;
          navigator.clipboard?.writeText(txt).then(()=>{
            const old = el.textContent;
            el.textContent = 'Copied';
            setTimeout(()=> el.textContent = 'Copy', 1000);
          }).catch(()=>{});
        }
      </script>
    </body>
    </html>
    